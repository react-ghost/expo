{"version":3,"file":"SearchBar.ios.js","sourceRoot":"","sources":["../../../shared/components/SearchBar.ios.tsx"],"names":[],"mappings":"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","sourcesContent":["import Ionicons from '@expo/vector-icons/build/Ionicons';\nimport { useNavigation } from '@react-navigation/native';\nimport React from 'react';\nimport {\n  Dimensions,\n  LayoutAnimation,\n  LayoutChangeEvent,\n  StyleSheet,\n  Text,\n  TextInput,\n  TextStyle,\n  TouchableOpacity,\n  View,\n} from 'react-native';\n\nconst Layout = {\n  window: {\n    width: Dimensions.get('window').width,\n  },\n};\nconst SearchContainerHorizontalMargin = 10;\nconst SearchContainerWidth = Layout.window.width - SearchContainerHorizontalMargin * 2;\n\nconst SearchIcon = () => (\n  <View style={styles.searchIconContainer}>\n    <Ionicons name=\"ios-search\" size={18} color=\"#ccc\" />\n  </View>\n);\n\nfunction SearchBar({\n  textColor,\n  cancelButtonText,\n  tintColor,\n  placeholderTextColor,\n  onChangeQuery,\n  onSubmit,\n  onCancelPress,\n  initialValue = '',\n}: {\n  initialValue?: string;\n  cancelButtonText?: string;\n  selectionColor?: string;\n  tintColor: string;\n  placeholderTextColor?: string;\n  underlineColorAndroid?: string;\n  textColor?: string;\n  onSubmit?: (query: string) => void;\n  onChangeQuery?: (query: string) => void;\n  onCancelPress?: (goBack: () => void) => void;\n}) {\n  const navigation = useNavigation();\n  const [text, setText] = React.useState(initialValue);\n  const [showCancelButton, setShowCancelButton] = React.useState(false);\n  const [inputWidth, setInputWidth] = React.useState(SearchContainerWidth);\n  const _textInput = React.useRef<TextInput>(null);\n\n  React.useEffect(() => {\n    requestAnimationFrame(() => {\n      _textInput.current?.focus();\n    });\n  }, []);\n\n  const _handleLayoutCancelButton = (e: LayoutChangeEvent) => {\n    if (showCancelButton) {\n      return;\n    }\n\n    const cancelButtonWidth = e.nativeEvent.layout.width;\n\n    requestAnimationFrame(() => {\n      LayoutAnimation.configureNext({\n        duration: 200,\n        create: {\n          type: LayoutAnimation.Types.linear,\n          property: LayoutAnimation.Properties.opacity,\n        },\n        update: {\n          type: LayoutAnimation.Types.spring,\n          springDamping: 0.9,\n          initialVelocity: 10,\n        },\n      });\n      setShowCancelButton(true);\n      setInputWidth(SearchContainerWidth - cancelButtonWidth);\n    });\n  };\n\n  const _handleChangeText = (text: string) => {\n    setText(text);\n    onChangeQuery?.(text);\n  };\n\n  const _handleSubmit = () => {\n    onSubmit?.(text);\n    _textInput.current?.blur?.();\n  };\n\n  const _handlePressCancelButton = () => {\n    if (onCancelPress) {\n      onCancelPress(navigation.goBack);\n    } else {\n      navigation.goBack();\n    }\n  };\n\n  const searchInputStyle: TextStyle = {};\n  if (textColor) {\n    searchInputStyle.color = textColor;\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={[styles.searchContainer, { width: inputWidth }]}>\n        <TextInput\n          ref={_textInput}\n          clearButtonMode=\"while-editing\"\n          onChangeText={_handleChangeText}\n          value={text}\n          autoCapitalize=\"none\"\n          autoCorrect={false}\n          returnKeyType=\"search\"\n          placeholder=\"Search\"\n          placeholderTextColor={placeholderTextColor || '#ccc'}\n          onSubmitEditing={_handleSubmit}\n          style={[styles.searchInput, searchInputStyle]}\n        />\n\n        <SearchIcon />\n      </View>\n\n      <View\n        key={showCancelButton ? 'visible-cancel-button' : 'layout-only-cancel-button'}\n        style={[styles.buttonContainer, { opacity: showCancelButton ? 1 : 0 }]}>\n        <TouchableOpacity\n          style={styles.button}\n          hitSlop={{ top: 15, bottom: 15, left: 15, right: 20 }}\n          onLayout={_handleLayoutCancelButton}\n          onPress={_handlePressCancelButton}>\n          <Text\n            style={{\n              fontSize: 17,\n              color: tintColor || '#007AFF',\n            }}>\n            {cancelButtonText || 'Cancel'}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'row',\n  },\n  buttonContainer: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    paddingTop: 15,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  button: {\n    paddingRight: 17,\n    paddingLeft: 2,\n  },\n  searchContainer: {\n    height: 30,\n    width: SearchContainerWidth,\n    backgroundColor: '#f2f2f2',\n    borderRadius: 5,\n    marginHorizontal: SearchContainerHorizontalMargin,\n    marginTop: 10,\n    paddingLeft: 27,\n  },\n  searchIconContainer: {\n    position: 'absolute',\n    left: 7,\n    top: 6,\n    bottom: 0,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 14,\n    paddingTop: 1,\n  },\n});\n\nexport { SearchBar };\n"]}